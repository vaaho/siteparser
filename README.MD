# Парсер сайтов

Универсальная парсер сайтов. 
Предназначен для парсинга большого количества сайтов на предмет анализа,
какие CRM, чаты, колтрекинги, виджеты и т.п. используются на сайте.
Анализ производится только по первой странице сайта. 

### Описание 

Состоит с трёх програм: `downloader`, `parser`, `exporter`:

1. `Downloader` скачивает первые страницы сайтов и сохраняет их локально на диск.
2. `Parser` парсит разнообразные данные по скаченным локально сайтам.
3. `Exporter` экспортирует результаты парсинга в CSV файл.

На текущий момент парсится следующая информация:
* Номера телефонов с главной страницы
* CRM сайта: WordPress, 1С-Битрикс, OpenCart, Tilda, InSales, NetCat 
* Коллтрекинги: Calltouch, CoMagic, Mango-Office, CallTracking.ru, Roistat 

### Програма `downloader` 

На вход принимает CSV файл `./input.csv` со списком доменов для скачивания. 
На выходе формирует папку `./sites/`, где для каждого домена создаётся JSON файл 
с результами скачки сайта. В нёмже сохраняется код ошибки, если скачивание не удалось. 

Опции для запуска:
```
  -input string
        Файл со списком доменов для парсина (default "./input.csv")
  -sites string
        Папка для сохранения результатов парсинга сайтов (default "./sites/")
  -threads int
        Максимально число паралельно скачиваемых сайтов (default 1000)
  -logFails
        Признак логирования ошибок скачивания сайтов
```

### Програма `parser` 

Пробегается по папке `./sites/` со скаченными сайтами и для каждого сайта парсин данные. 
Результат парсинга сохраняется в том же JSON файле. 

Опции для запуска:
```
  -sites string
        Папка для сохранения результатов парсинга сайтов (default "./sites/")
```

### Програма `exporter` 

На вход принимает CSV файл `./input.csv` со списком доменов для скачивания. 
На выходе формирует CSV файл `./output.csv`, в котором колонки с результатами эпарсинга.
В работе используются результаты парсинга из папки `./sites/`.

Обязательным параметром програмы является опция `-export`, которая задаёт набор колонок для экспорта. 
Возможные значения:

* `numbers` - добавляет колонку с номерами телефонов с первой страницы сайта через запятую;
* `crm` - добавляет колонки с названиями CRM систем, установленных на сайте;
* `ct` - добавляет колонки с названиями колтрекингов на сайте.

Опции для запуска:
```
  -export string
        Набор колонок через запятую для выгрузки
  -input string
        Файл со списком доменов для парсина (default "./input.csv")
  -output string
        Файл со результатами парсина (default "./output.csv")
  -sites string
        Папка для сохранения результатов парсинга сайтов (default "./sites/")
  -noColumnsRow
        Срока с названием колонок отсутсвует
```



